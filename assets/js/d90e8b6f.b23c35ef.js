"use strict";(self.webpackChunkint=self.webpackChunkint||[]).push([[1885],{8453:(e,a,n)=>{n.d(a,{R:()=>i,x:()=>t});var o=n(6540);const r={},s=o.createContext(r);function i(e){const a=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function t(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(s.Provider,{value:a},e.children)}},8765:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>d,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"internal-docs/frontend/componentes/guard","title":"Guard","description":"Fun\xe7\xe3o:","source":"@site/docs/internal-docs/frontend/componentes/guard.md","sourceDirName":"internal-docs/frontend/componentes","slug":"/internal-docs/frontend/componentes/guard","permalink":"/Internal-TriOH-Docs/docs/internal-docs/frontend/componentes/guard","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/internal-docs/frontend/componentes/guard.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Navigation","permalink":"/Internal-TriOH-Docs/docs/internal-docs/frontend/componentes/navigation"},"next":{"title":"AccessControl","permalink":"/Internal-TriOH-Docs/docs/internal-docs/frontend/componentes/access_control"}}');var r=n(4848),s=n(8453);const i={sidebar_position:3},t="Guard",d={},c=[{value:"<strong>Fun\xe7\xe3o:</strong>",id:"fun\xe7\xe3o",level:2},{value:"<strong>Props:</strong>",id:"props",level:2}];function l(e){const a={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"guard",children:"Guard"})}),"\n",(0,r.jsx)(a.h2,{id:"fun\xe7\xe3o",children:(0,r.jsx)(a.strong,{children:"Fun\xe7\xe3o:"})}),"\n",(0,r.jsx)(a.p,{children:"Envolve uma p\xe1gina ou se\xe7\xe3o protegida."}),"\n",(0,r.jsxs)(a.p,{children:["Ele verifica se o usu\xe1rio ",(0,r.jsx)(a.strong,{children:"tem permiss\xe3o/autentica\xe7\xe3o"})," para acessar aquele conte\xfado:"]}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"Se tem acesso, renderiza o conte\xfado normalmente"}),"\n",(0,r.jsx)(a.li,{children:"Caso n\xe3o tenha aplica um Blur sobre a p\xe1gina e mostra um estado visual (ex: cadeado + mensagem) e redireciona caso se aplique o usu\xe1rio para a p\xe1gina necess\xe1ria (login, autentica\xe7\xe3o, permiss\xe3o especial)."}),"\n",(0,r.jsx)(a.li,{children:"O redirecionamento inclui automaticamente um query param next, que indica para onde o usu\xe1rio deve voltar depois de completar a a\xe7\xe3o. Ex: \u201c/login?next=/dashboard\u201d"}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:(0,r.jsx)(a.strong,{children:"Importante:"})}),"\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsxs)(a.li,{children:[(0,r.jsx)(a.code,{children:"isAllowed"})," \u2014 boolean: Resultado da verifica\xe7\xe3o, verifica\xe7\xe3o (idealmente derivado de uma checagem server-side). Se falso o usu\xe1rio n\xe3o ver\xe1 o conte\xfado protegido","\n",(0,r.jsxs)(a.ul,{children:["\n",(0,r.jsx)(a.li,{children:"\xc9 necess\xe1rio usar o checkStrategy do lib/auth/checkAccess.ts, para adquirir esse valor"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(a.p,{children:"O Guard pode ter auto redirect al\xe9m dos bot\xf5es de a\xe7\xe3o ent\xe3o \xe9 necess\xe1rio ter cuidado para n\xe3o usar mais de um redirect por p\xe1gina."}),"\n",(0,r.jsx)(a.p,{children:"Fica de responsabilidade da p\xe1gina em quest\xe3o implementar a l\xf3gica de redirect de volta para a p\xe1gina no query params, caso tenha o mesmo. (Criar uma utils para isso e evitar repeti\xe7\xf5es, ex: uma fun\xe7\xe3o que recebe outra fun\xe7\xe3o e seus estados)"}),"\n",(0,r.jsx)(a.h2,{id:"props",children:(0,r.jsx)(a.strong,{children:"Props:"})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-md",children:'- `children` \u2014 ReactNode: Conte\xfado autorizado, oque deve ser renderizado na p\xe1gina, caso o usu\xe1rio tenha permiss\xe3o.\n- `callbackUrl` \u2014 string(opcional): URL de destino para onde o usu\xe1rio deve voltar(ser redirecionado) ap\xf3s o sucesso. Deve ser validada (usar caminhos relativos ou validados para evitar open-redirect). Se omitido a atual \xe9 usada, essa \xe9 a url que vai em ?next={callbackUrl}. **"para onde voltar depois da autentica\xe7\xe3o"**.\n- `targetUrl` \u2014 string(opcional): URL da p\xe1gina a qual o usu\xe1rio ser\xe1 redirecionado. Se n\xe3o informado ele n\xe3o \xe9 redirecionado. **"pra onde mandar quando a permiss\xe3o n\xe3o existe"**.\n- `requiredRoles` \u2014 string[]: lista de roles (ex.: `["admin", "manager"]`).\n- `checkStrategy` \u2014 \u201cany\u201d | \u201call\u201d (opcional) : se precisa de **qualquer** ou **todas** as permiss\xf5es (default: `"all"`).\n- `mode` \u2014 [\u201dblock\u201d | \u201cmask"](opcional): URL de destino para onde o usu\xe1rio deve voltar(ser redirecionado) ap\xf3s o sucesso. Deve ser validada (usar caminhos relativos ou validados para evitar open-redirect).  Mask (Default)\n    - Block: default n\xe3o renderizada o children, quando negado (em tese essa vai ser a op\xe7\xe3o mais segura, por\xe9m menos agrad\xe1vel)\n    - Mask: Mant\xe9m renderizado o children com internet e pointer events none + aria hidden e um blur por cima\n- `icon` \u2014 ReactNode (opcional): \xedcone ilustrativo (cadeado, carteira, etc.). Se n\xe3o informado, usa um padr\xe3o\n- `redirectDelayMs` \u2014 number | null (opcional): tempo em ms antes de tentar o redirect autom\xe1tico. `null` = nunca redirecionar automaticamente. Se n\xe3o informado = undefined, ent\xe3o ir instantaneamente\n- `message` \u2014 string(opcional): Mensagem que diz ao usu\xe1rio que ele ser\xe1 redirecionado para a determinada p\xe1gina, se n\xe3o fornecida usar uma padr\xe3o.\n- `actions` \u2014 array de ReactNode (opcional): bot\xf5es/links extras a mostrar (ex.: \u201cEntrar com Google\u201d, \u201cEntrar com GitHub\u201d, \u201cFalar com suporte\u201d).\n- `className` \u2014 string (opcional): para estiliza\xe7\xe3o extra.\n'})}),"\n",(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-jsx",children:'<Guard \n\tcallbackUrl="/example" \n\ttargetUrl="/login" \n\tredirectDelayMs={undefined} \n\trequiredRoles={["admin"]}\n>\n\t<Conteudo/>\n</Guard>\n'})})]})}function u(e={}){const{wrapper:a}={...(0,s.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);